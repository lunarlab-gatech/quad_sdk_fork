<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Quad-SDK: Quad-SDK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Quad-SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Quad-SDK </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> <a href="https://circleci.com/gh/robomechanics/quad-sdk/tree/main"><img src="https://circleci.com/gh/robomechanics/quad-sdk/tree/main.svg?style=shield" alt="CircleCI" style="pointer-events: none;" class="inline"/></a> <img src="doc/quad_sdk_promo.png" alt="Example image" class="inline"/></p>
<h2>Quad-SDK Fork</h2>
<p>This is a fork of the <a href="https://github.com/robomechanics/quad-sdk">Quad-SDK</a> repository, used to generate simulated UniTree Go2 data for use with the <a href="https://github.com/lunarlab-gatech/Morphology-Informed-HGNN">MI-HGNN</a> paper. For the main repository README.md or the documentation for how to use it, please see the original <a href="https://github.com/robomechanics/quad-sdk">Quad-SDK</a> repository.</p>
<p>However, we made some alterations to the setup process in order to resolve issues or streamline the process. See the sections below for alterations to the install process, the list of changes, and the updated usage to replicate our dataset collection process:</p>
<h2>Install Alterations</h2>
<h3>Get HSL solver for IPOPT</h3>
<p>On the "1. Getting Started with Quad SDK" page of the <a href="https://github.com/robomechanics/quad-sdk">Quad-SDK</a> Wiki, it mentions "Get HSL solver for IPOPT". However, you can't install the latest version of the solver, as it has build errors (see Issue #<a href="https://github.com/robomechanics/quad-sdk/issues/425">425</a>). As of the time of writing, it's unclear whether this is solved, but we worked around it by getting the 2022.11.09 version of the solver.</p>
<h2>Changelog</h2>
<ul>
<li>Enabled the "ma57" version of the HSL Solver for faster solving.</li>
<li>Slowed Simulation speed down to 1/5 of real-world speed in order to prevent dropped ROS messages.</li>
<li>The 'A1' robot is used by default instead of the 'Spirit' robot.</li>
<li>Update IMU ROS topic from '&lt;robot&gt;/trunk_imu' to '&lt;robot&gt;/state/imu'.</li>
<li>Set initialOrientationAsReference=false for IMU.</li>
<li>Fix bug causing contact sensor information not to be properly reported.</li>
<li>Increased the IMU update rate maximum to 1000 hz (which ends up being 750 hz in practice).</li>
<li>Wrote the <a href="https://github.com/lunarlab-gatech/quad_sdk_message_synchronizer">Quad-SDK Message Synchronizer</a> in order to synchronize the three messages that we need.</li>
<li>Logger now logs the ROS messages output from the <a href="https://github.com/lunarlab-gatech/quad_sdk_message_synchronizer">Quad-SDK Message Synchronizer</a>.</li>
<li>Fixed the teleop_twist_joy package so Joysticks can be used to control the robot.</li>
<li>Added Nintendo Switch Pro Controller Config file for Joystick input.</li>
</ul>
<h2>Updated Usage</h2>
<p>Make sure to source the ROS Noetic install, and download the <a href="https://github.com/lunarlab-gatech/quad_sdk_message_synchronizer">Quad-SDK Message Synchronizer</a> into the same ROS workspace <code>src</code> folder as this repository, and then rebuild and re-source the ros workspace.</p>
<p>Launch the simulation with: </p><div class="fragment"><div class="line">roslaunch quad_utils quad_gazebo.launch</div>
</div><!-- fragment --><p>Stand the robot with: </p><div class="fragment"><div class="line">rostopic pub /robot_1/control/mode std_msgs/UInt8 &quot;data: 1&quot;</div>
</div><!-- fragment --><h3>Controlling the robot</h3>
<p>There are two options, either a user can control it directly, or use the global planner to control the robot for them.</p>
<p>To control the robot with keyboard input: </p><div class="fragment"><div class="line">roslaunch quad_utils quad_plan.launch reference:=twist</div>
<div class="line">rosrun teleop_twist_keyboard teleop_twist_keyboard.py cmd_vel:=/robot_1/cmd_vel</div>
</div><!-- fragment --><p>Or to control the robot with Joystick input: </p><div class="fragment"><div class="line">roslaunch quad_utils quad_plan.launch reference:=twist</div>
<div class="line">roslaunch teleop_twist_joy teleop.launch</div>
</div><!-- fragment --><p> To edit the speed that the joystick sends, see "external/teleop_twist_joy/config/pro_controller.config.yaml". Changing <code>scale_linear</code> and <code>scale_angular</code> changes the forward and turning speeds, respectively.</p>
<p>Or, to have the global planner drive the robot: </p><div class="fragment"><div class="line">roslaunch quad_utils quad_plan.launch reference:=gbpl</div>
</div><!-- fragment --><h3>Logging the dataset values</h3>
<p>To log the dataset, run the following commands </p><div class="fragment"><div class="line">roslaunch quad_sdk_message_synchronizer synch_log_messages.launch</div>
<div class="line">roslaunch quad_utils logging.launch</div>
</div><!-- fragment --><p>The timestamped file will be saved in the <code>quad_logger/bags/archive/</code> folder.</p>
<p>The dataset values we are interested in (and that are logged) can be seen below:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Data   </th><th class="markdownTableHeadNone">Source   </th><th class="markdownTableHeadNone">Frame   </th><th class="markdownTableHeadNone">Units   </th><th class="markdownTableHeadNone">ROS Topic    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Joint Position   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/ground_truth    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Joint Velocity   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/ground_truth    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Joint Feedback Torque   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/ground_truth    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Linear Acceleration   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/imu    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Angular Velocity   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/imu    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Robot Position   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/ground_truth    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Robot Orientation   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/ground_truth    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Foot Position   </td><td class="markdownTableBodyNone">Not Yet Implemented   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">???    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Foot Velocity   </td><td class="markdownTableBodyNone">Not Yet Implemented   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">???    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Ground Reaction Forces   </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">/robot_1/state/grfs   </td></tr>
</table>
<h3>Debugging</h3>
<p>If you have any issues with the simulator, closing all terminal tabs and restarting has been found to resolve some problems.</p>
<h2>Important Resources</h2>
<p>These following websites have been useful for determining how Gazebo and Quad-SDK works:</p>
<h3>Quad-SDK Tutorials</h3>
<ul>
<li>Creating Custom Terrain Files (<a href="https://github.com/robomechanics/quad-sdk/wiki/Tutorial:-Creating-Custom-Terrain-Map-Files">https://github.com/robomechanics/quad-sdk/wiki/Tutorial:-Creating-Custom-Terrain-Map-Files</a>)</li>
<li>Adding a new type of Robot (<a href="https://github.com/robomechanics/quad-sdk/wiki/Tutorial:-Adding-a-New-Type-of-Robot-to-Quad-SDK">https://github.com/robomechanics/quad-sdk/wiki/Tutorial:-Adding-a-New-Type-of-Robot-to-Quad-SDK</a>)</li>
</ul>
<h3>Gazebo Documentation</h3>
<ul>
<li>Gazebo Classic Documentation - This repository uses version 11.14.0 (<a href="https://classic.gazebosim.org/tutorials">https://classic.gazebosim.org/tutorials</a>)</li>
<li>Setting Friction parameters in Gazebo (<a href="https://classic.gazebosim.org/tutorials?tut=friction&cat=physics">https://classic.gazebosim.org/tutorials?tut=friction&amp;cat=physics</a>)</li>
<li>Gazebo Physics parameters (<a href="https://classic.gazebosim.org/tutorials?tut=physics_params&cat=physics">https://classic.gazebosim.org/tutorials?tut=physics_params&amp;cat=physics</a>)</li>
<li>Gazebo ROS Plugin Tutorial - Also contains ROS Plugin for IMU (<a href="https://classic.gazebosim.org/tutorials?tut=ros_gzplugins">https://classic.gazebosim.org/tutorials?tut=ros_gzplugins</a>)</li>
<li>Sensor Noise models (<a href="https://classic.gazebosim.org/tutorials?tut=sensor_noise#Introduction">https://classic.gazebosim.org/tutorials?tut=sensor_noise#Introduction</a>)</li>
</ul>
<h3>API</h3>
<ul>
<li>Gazebo API Reference - Great for understanding Gazebo Sensor implementations, functions, etc. (<a href="https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/index.html">https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/index.html</a>)</li>
<li>Contact Sensor Class Reference (<a href="https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/classgazebo_1_1sensors_1_1ContactSensor.html">https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/classgazebo_1_1sensors_1_1ContactSensor.html</a>)</li>
<li>Joint Class Reference (<a href="https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/classgazebo_1_1physics_1_1Joint.html#a85f6b25f1d0d6451a84875c18c57535d">https://osrf-distributions.s3.amazonaws.com/gazebo/api/dev/classgazebo_1_1physics_1_1Joint.html#a85f6b25f1d0d6451a84875c18c57535d</a>) </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
